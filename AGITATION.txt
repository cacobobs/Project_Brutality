Actor DoomerJetpackActivated:Inventory
{
inventory.maxamount 1
}

actor Revenant_Rune : Weapon
{
  obituary "%o couldn't evade the Revenant's fireball."
  hitobituary "%o was punched by the Revenant."
  radius 20
  height 16
  inventory.pickupmessage "No John, you are the demons!"
  Weapon.AmmoType1 "MiniHellRocketAmmo"
  Inventory.PickupSound "BFGREADY"
  +WEAPON.DONTBOB
  +WEAPON.NOAUTOFIRE
  States
  {
  Ready:
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY A 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY B 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY C 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY D 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY E 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY F 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY G 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY H 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY I 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY J 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY K 4 A_WeaponReady
	TNT1 A 0 A_JumpIfInventory("GoWeaponSpecialAbility", 1, "Jetpack")
    RRDY L 4 A_WeaponReady
	TNT1 A 0 A_Jump(204, 2)
	TNT1 A 0 A_Playsound("skeleton/active", 7)
	TNT1 A 0
    Loop
	
	Jetpack:
		TNT1 AAAAA 0
		TNT1 A 0 A_playsound("cbaron/metal", 1)
		TNT1 A 0 A_Takeinventory("GoWeaponSpecialAbility",1)
		TNT1 A 0 A_JumpIfInventory("DoomerJetpackActivated", 1, "DeactivateJetpack")
		TNT1 A 0 A_GiveInventory("DoomerJetpackActivated", 1)
		TNT1 A 0 A_Print("Jetpack Activated")
		TNT1 A 0 A_GunFlash("ThrustersOn")
		Goto Ready
		
	DeactivateJetpack:
		TNT1 A 0 A_Takeinventory("DoomerJetpackActivated",1)
		TNT1 A 0 A_Print("Jetpack Deactivated")
		Goto Ready
		
	ThrustersOn:
		TNT1 A 0 A_JumpIfInventory("DoomerJetpackActivated", 1, 3)
		TNT1 A 0 A_StopSound(4)
		Stop
		TNT1 AAA 0
		TNT1 A 0 A_PlaySound("arachnophyte/engine", 4, 1, 1)
		TNT1 A 2 
		TNT1 A 0 A_SpawnItemEx("BurnParticlesNoPain",0,-10,-25,0,0,0,0,288)
		TNT1 A 0 A_SpawnItemEx("BurnParticlesNoPain",0,10,-25,0,0,0,0,288)
		TNT1 A 0 A_SpawnItemEx("ExplosionParticleVerySlow",0,-5,-25,0,0,0,0,288)
		TNT1 A 2 ThrustThingZ(0, 13, 0, 0)
		loop
		
  Deselect: 
    TNT1 A 0 A_JumpIfInventory("RevenantCurse", 1, "Ready")
	TNT1 A 0 A_StopSound(4)
    DRUN ABCDEF 2 A_Lower
    Loop
	
  Select:
	TNT1 A 0 A_ZoomFactor(0.80)
	TNT1 A 0 A_StopSound(4)
	TNT1 A 0 A_Raise
    Loop
  	
  Fire:
	TNT1 A 0 A_PlaySound("REILAIM")
  Scanning:
	RVRD J 1 A_JumpIfTargetInLOS("OpenFire")
	TNT1 A 0 A_Refire("Scanning")
	Goto Ready
	    
  OpenFire:
    TNT1 A 0
	TNT1 A 0 A_PlaySound("hellishmissle/fire", 1)
    TNT1 A 0 A_JumpIfInventory("RevenantRocketFire1823", 1, "OpenFire2")
    TNT1 A 0 BRIGHT A_FireCustomMissile("Alerter", 0, 0, -1, 0)
	TNT1 A 0 A_ZoomFactor(0.78)
    RVRD B 2 BRIGHT A_FireCustomMissile("DoomerRevenantSeeker3", random(4,-4), 1, -10, 0)
	TNT1 A 0 A_ZoomFactor(0.77)
    TNT1 A 0 A_FireCustomMissile("ShakeYourAss", 0, 0, 0, 0)
    RVRD C 1 A_ZoomFactor(0.78)
	RVRD D 1 A_ZoomFactor(0.79)
	RVRD E 1 A_ZoomFactor(0.80)
    TNT1 A 0 A_GiveInventory("RevenantRocketFire1823", 1)
	RRDY A 4
    RRDY A 1 A_Refire("Scanning")
	Goto Ready
		
  OpenFire2:
	TNT1 A 0 A_PlaySound("hellishmissle/fire", 2)
	TNT1 A 0 A_ZoomFactor(0.78)
    RVRD F 2 BRIGHT A_FireCustomMissile("DoomerRevenantSeeker2", random(4,-4), 1, 10, 0)
	TNT1 A 0 A_ZoomFactor(0.77)
    TNT1 A 0 A_FireCustomMissile("ShakeYourAss", 0, 0, 0, 0)
    RVRD G 1 A_ZoomFactor(0.78)
	RVRD H 1 A_ZoomFactor(0.79)
	RVRD I 1 A_ZoomFactor(0.80)
	RRDY A 4
    TNT1 A 0 A_TakeInventory("RevenantRocketFire1823", 1)
    RRDY A 1 A_Refire("Scanning")
	Goto Ready
	
	
  AltFire:
	RPNC A 1 A_ZoomFactor(0.80)
    RPNC B 1 A_ZoomFactor(0.82)
	RPNC C 1 A_ZoomFactor(0.84)
    RPNC D 2 A_Playsound("rev/punch2")
	TNT1 A 0 A_ZoomFactor(0.82)
    RPNC C 2 A_Firecustommissile("RevenantStrike")//A_Custompunch(25,1,1,"MeleePuff")
	TNT1 A 0 A_ZoomFactor(0.80)
    RPNC B 2 //A_JumpIfcloser(127,1)
	TNT1 A 0 A_PlaySound("skeleton/swing")
    Goto ready
    RPNC D 2 A_Playsound("rev/punch")
    RPNC D 0 A_Firecustommissile("RevenantStrike")
    Goto ready

  Flash:
    TNT1 A 4 bright A_Light1
    TNT1 B 5 bright A_Light2
    TNT1 A 0 bright A_Light0
    stop
  Spawn:
    TNT1 A -1
    stop
  }
}

ACTOR RevenantStrike: MeleeStrike1
{
Damage (random(200,250))
DamageType Extremepunches
Speed 15
}